# Spinning Up A Stack Using Heat (tl;dr remix)
## Author: Paul Nelson <paul.nelson@rackspace.com>

### Prerequisites

  * [Python 2.7](http://www.python.org/download/releases/2.7/)
  * [pip](http://www.pip-installer.org/en/latest/installing.html/)
  * (optional) a [Pyhon Virtual Environment](http://docs.python-guide.org/en/latest/dev/virtualenvs/)

_If you're using a Mac, [homebrew](http://brew.sh/) is your friend._

### This guide uses python-heatclient, so...

        pip install python-heatclient

_If you're __not__ using a virtual environment, you may need to start the above incantation with [sudo](http://xkcd.com/149/)._

More about python-heat-client can be found in [OpenStack's documentation](http://docs.openstack.org/developer/python-heatclient/).

### >>Sanity Check<< Command Line Works

        heat help

This should give you a long list of all the options available from the heat command

### Environment Variables Make Things Easier

        OS_USERNAME="<your-rackspace-cloud-account-username>"
        OS_PASSWORD="<your-rackspace-cloud-account-password>"
        OS_TENANT_ID="<your-rackspace-cloud-account-tenant-id>"
        OS_AUTH_URL="https://identity.api.rackspacecloud.com/v2.0/"
        HEAT_URL="https://iad.orchestration.api.rackspacecloud.com/v1/${OS_TENANT_ID}"

_Refer to your particular OS for details on how to setup environment variables. These can also be passed as command line parameters if you'd rather not mess with environment variables._

### >>Sanity Check<< Local Env

        heat -k stack-list

This should return a list of all of your stacks. If this is your first time using Heat, it should be an empty list.

### The world's simplest Heat Orchestration Template (HOT) _(...that actually spins up a resource)_

Use your favorite editor to create this file (named 'hello-heat.template'):

        heat_template_version: 2013-05-23

        resources:
          compute_instance:
            type: "Rackspace::Cloud::Server"
            properties:
              flavor: 512MB Standard Instance
              image: CentOS 6.4
              name: Simplest Stack In The World

### Spin It Up!

        heat -k stack-create Hello-Heat-Stack --template-file hello-heat.template

### Check In On It

        heat -k stack-list

Look for the stack_name "Hello-Heat-Stack". If everything goes as planned it will have a status of "CREATE_IN_PROGRESS" for a bit, followed by "CREATE_COMPLETE".

__Congratulations!__ You have successfully spun up your first Heat Stack. Of course it's not a very useful stack: you don't even know it's IP address and you can't ssh into it. There's only one thing left to do...

### Delete It

        heat -k stack-delete Hello-Heat-Stack

You should see the status reported as "DELETE_IN_PROGRESS". If you check again in a minute or so you should eventually see that the stack is no longer in the list, which means it has been deleted.
